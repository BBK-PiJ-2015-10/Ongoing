package theappbusiness;

import java.util.Stack;
import java.util.Set;
import java.util.HashSet;

public class Java1DArray {

	public static void main(String[] args) {
		
		
		Java1DArray ja = new Java1DArray();
		
		int[] test1 = {0,0,0,0,0};
		//ja.runTest(true,test1,5,3,1);
		
		int[] test2 = {0,0,0,1,1,1};
		//ja.runTest(true,test2,6,5,2);
		
		int[] test3 = {0,1,0};
		//ja.runTest(false,test3,3,1,3);
		
		int[] test4 = {0,0,1,1,1,0};
		ja.runTest(false,test4,6,3,4);
		

	}
	
	
	public boolean evalArray(int[] values,int size,int fast){
		int initialNode=0;
		int limit=size-1;
		int forward=1;
		int backward=-1;
		int jump=fast;
		
		Stack<Integer> path = new Stack();
		Set<Integer> closed = new HashSet();
		
		path.push(initialNode);
		
		while (!path.isEmpty()){
			int currentNode=path.peek();
			//System.out.println("I am at " +currentNode);
			if (!closed.contains(currentNode)){
				if (currentNode>limit){
					return true;
				}
				if ((currentNode+jump)>limit){
					return true;
				}
				else {
					int potential=currentNode+jump;
					if ((values[potential]==0) && (!closed.contains(potential))){
						path.push(potential);
					}
					else {
						if (!closed.contains(potential)){
							closed.add(potential);
							System.out.println("Closed : " +potential);
						}
						potential=currentNode+forward;
						if ((potential)>limit){
							return true;
						}
						else {
							if ((values[potential]==0) && (!closed.contains(potential))){
								path.push(potential);
							}
							else {
								if (!closed.contains(potential)){
									closed.add(potential);
									System.out.println("Closed : " +potential);
								}
								potential=currentNode+backward;
								if ((potential)<0){
									return false;
								}
								if ((values[potential]==0) && (!closed.contains(potential))){
									path.push(potential);
								}
								else {
									if (!closed.contains(potential)){
										closed.add(potential);
										System.out.println("Closed : " +potential);
									}
									closed.add(currentNode);
									path.pop();
									
								}
							}
						}
					}	
				}	
			}				
		}
			
		return false;
	}
	
	public void runTest(boolean expected,int[] values, int target, int fast,int testRef){
		String result;
		if (expected==evalArray(values,target,fast)){
			result="passed";
		}
		else {
			result="failed";
		}
		System.out.println("Test # "+testRef +" " +result);
	}

}
