package mavenproject1;

import org.neo4j.graphdb.factory.GraphDatabaseFactory;
import org.neo4j.graphdb.GraphDatabaseService;
import org.neo4j.graphdb.Transaction;
import org.neo4j.graphdb.Label;
import org.neo4j.graphdb.Node;
import org.neo4j.graphdb.RelationshipType;
import org.neo4j.graphdb.Relationship;

public class Driver {

	public enum NodeType implements Label {
		Person, Course; 
	}
	
	public enum RelationType implements RelationshipType {
		Knows, BelongsTo;
	}
	
	public static void main(String[] args) {
				
		GraphDatabaseFactory dbFactory = new GraphDatabaseFactory();
		GraphDatabaseService graphdb = dbFactory.newEmbeddedDatabase("C:\\Program Files\\Neo4j CE 3.1.1\\data\\graph.db"); 

		try (Transaction tx = graphdb.beginTx()){
			Node bobNode = graphdb.createNode(NodeType.Person);
			bobNode.setProperty("Pid",5001);
			bobNode.setProperty("Name","Bob");
			bobNode.setProperty("Age","41");
			
			Node aliceNode = graphdb.createNode(NodeType.Person);
			aliceNode.setProperty("Pid",5002);
			aliceNode.setProperty("Name","Alice");
			
			
			Node eveNode = graphdb.createNode(NodeType.Person);
			eveNode.setProperty("Name","Eve");
			
			Node itNode = graphdb.createNode(NodeType.Course);
			itNode.setProperty("Id",1);
			itNode.setProperty("Name","IT Beginners");
			itNode.setProperty("Location","Room 153");
			
			Node electronicNode = graphdb.createNode(NodeType.Course);
			electronicNode.setProperty("Name","Electronics Advanced");
			
			bobNode.createRelationshipTo(aliceNode,RelationType.Knows);
			
			Relationship bobRelIT = bobNode.createRelationshipTo(itNode,RelationType.BelongsTo);
			bobRelIT.setProperty("function","Student");
			
			Relationship bobRelElectronics = bobNode.createRelationshipTo(electronicNode,RelationType.BelongsTo);
			bobRelElectronics.setProperty("function","Teacher");
			
			Relationship aliceRelIT = aliceNode.createRelationshipTo(itNode,RelationType.BelongsTo);
			aliceRelIT.setProperty("function","Teacher");
			
			tx.success();
		
		}
		
		graphdb.shutdown();
		
	}

}
